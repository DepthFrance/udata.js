{
  "name": "Metaclic",
  "tagline": "Librairie JS d'intégration du catalogue data.gouv.fr",
  "body": "# Metaclic\r\n\r\nLibrairie JS d'intégration du catalogue data.gouv.fr (https://www.data.gouv.fr)\r\n\r\n##  démo\r\nhttp://datakode.github.io/metaclic/exemples/exemple.html\r\n\r\n## utilisation\r\n```\r\n       <script>window.jQuery || document.write(\"<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js'><\\/script>\")</script>\r\n\r\n        <!-- chargement feuille de style bootstrap -->\r\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css\">\r\n        <!-- chargement feuille de style font-awesome -->\r\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css\">\r\n\r\n        <div\r\n          class=\"Metaclic-data\"\r\n          data-organizations=\"534fffb3a3a7292c64a78129,551959f6c751df6682057c91,534fffb9a3a7292c64a7814f,558bef88c751df1fd9a453b9,55896c18c751df5864a453b9,558bf578c751df2f9ea453ea,534fff4ea3a7292c64a77cab\"\r\n          data-organization=\"551959f6c751df6682057c91\"\r\n          data-q=\"eau\"\r\n          data-facets=\"all\"\r\n          data-page_size=\"5\">\r\n        </div>\r\n```\r\nparamètres:\r\n  - data-organizations: ID des organisations proposées dans le menu déroulant\r\n  - data-organization: ID de l'organisation selectionnée (optionnel)\r\n  - data-q: recherche initiale (optionnel)\r\n  - data-page_size: nombre de résultat par page (optionnel)\r\n  - data-sort: tri des résulats, valeurs possibles ['title','created','last_modified','followers','reuses',false] si false le menu est masqué (optionnel, default: title)\r\n  - data-sharelink: boolean si true, affiche le lien de partage (optionnel, default: false)\r\n\r\nl'ensemble des paramètres de l'API Metaclic [GET /datasets/](https://www.data.gouv.fr/fr/apidoc/#!/datasets/list_datasets) sont utilisables\r\n\r\nex: `data-tag='transport'`\r\n\r\n## personnalisation\r\n\r\nVous pouvez personnaliser l'affichage en utilisant des templates [handlebars](http://handlebarsjs.com/)\r\nvoici les identifiants et templates par défaut utilisés:\r\n\r\n - **metaclic_template_datasetsForm** (affichage du formulaire de recherche)\r\n```\r\n<script id='metaclic_template_datasetsForm' type=\"text/x-handlebars-template\">\r\n        <div class=\"datasetsForm\">\r\n                <form action=\"\" method=\"get\">\r\n                        <div><label></label><input type=\"text\" name=\"q\" value=\"{{q}}\" placeholder=\"Rechercher des données\" class=\"form-control\"></input></div>\r\n                        {{#ifCount orgs \">\" 1 }}\r\n                        <div>\r\n                        {{else}}\r\n                        <div class=\"hidden\">\r\n                                {{/ifCount}}\r\n                                <label>Organisme</label><select name=\"organizations\" class=\"form-control\">\r\n                                {{#each orgs}}\r\n                                {{#ifCond id \"==\" ../organization}}\r\n                                <option value=\"{{id}}\" selected>{{name}}</option>\r\n                                {{else}}\r\n                                <option value=\"{{id}}\">{{name}}</option>\r\n                                {{/ifCond}}\r\n                                {{/each}}\r\n                        </select></div>\r\n                </form>\r\n        </div>\r\n        <br>\r\n</script>\r\n```\r\n\r\n - **metaclic_template_datasets** (affichage de la liste résultat)\r\n```\r\n<script id='metaclic_template_datasets' type=\"text/x-handlebars-template\">\r\n        <div class=\"result-count\">{{ total }} résultat(s)</div>\r\n        {{#ifCond sort \"!=\" false}}\r\n        <div class=\"result-sort form-inline\"><label>Trier par</label>\r\n                <select name=\"sort\" class=\"form-control\">\r\n                    {{#each sortTypes}}\r\n\r\n                    {{#ifCond id \"==\" ../sort}}\r\n                    <option value=\"{{id}}\" selected>{{name}}</option>\r\n                    {{else}}\r\n                    <option value=\"{{id}}\">{{name}}</option>\r\n                    {{/ifCond}}\r\n\r\n                    {{/each}}\r\n                </select>\r\n                <a href=\"#\" class=\"sortdirection\">\r\n                    {{#ifCond sortDesc \"==\" true}}\r\n                    <i class=\"fa fa-sort-alpha-desc\"></i>\r\n                    {{else}}\r\n                    <i class=\"fa fa-sort-alpha-asc\"></i>\r\n                    {{/ifCond}}\r\n                </a>\r\n        </div>\r\n        {{/ifCond}}\r\n        <ul class=\"search-results\">\r\n                {{#each data}}\r\n                <li class=\"search-result dataset-result\" data-dataset=\"{{id}}\">\r\n                    <a href=\"{{ page }}\" title=\"{{  organization.name }}\"  data-dataset=\"{{id}}\">\r\n\r\n                        <div class=\"result-logo pull-left\">\r\n                            <img alt=\"\" src=\"{{organization.logo}}\" width=\"70\" height=\"70\">\r\n                        </div>\r\n                        {{#if organization.public_service }}\r\n                        <img alt=\"certified\" class=\"certified\" rel=\"popover\" data-title=\"{{_ 'certified_public_service'}}\" data-content=\"{{_ 'the_identity_of_this_public_service_public_is_certified_by_etalab'}}\" data-container=\"body\" data-trigger=\"hover\"/>\r\n                        {{/if}}\r\n                        <div class=\"result-body ellipsis-dot is-truncated\" style=\"word-wrap: break-word;\">\r\n                            <h4 class=\"result-title\">{{title}}</h4>\r\n\r\n                            <div class=\"result-description\">\r\n                                {{mdshort description 128}}\r\n                            </div>\r\n                        </div>\r\n\r\n                        </a>\r\n                        <ul class=\"list-inline result-infos\">\r\n                                {{#if temporal_coverage }}\r\n                                <li>\r\n                                    <span class=\"\" rel=\"tooltip\"\r\n                                    data-placement=\"top\" data-container=\"body\"\r\n                                    title=\"{{_ 'temporal_coverage'}}\">\r\n                                    <span class=\"fa fa-calendar fa-fw\"></span>\r\n                                    {{dt temporal_coverage.start format='L' }} {{_ 'to'}} {{dt temporal_coverage.end format='L' }}\r\n                                    </span>\r\n                                </li>\r\n                                {{/if}}\r\n\r\n                                {{#if frequency }}\r\n                                <li>\r\n                                        <span class=\"\" rel=\"tooltip\"\r\n                                        data-placement=\"top\" data-container=\"body\"\r\n                                        title=\"{{_ 'Update frequency' }}\">\r\n                                        <span class=\"fa fa-clock-o fa-fw\"></span>\r\n                                        {{_ frequency }}\r\n                                        </span>\r\n                                </li>\r\n                                {{/if}}\r\n\r\n                                {{#if spatial.territories }}\r\n                                <li>\r\n                                        <span class=\"\" rel=\"tooltip\"\r\n                                        data-placement=\"top\" data-container=\"body\"\r\n                                        title=\"{{_ 'Spatial coverage'}}\">\r\n                                        <span class=\"fa fa-map-marker fa-fw\"></span>\r\n                                        {{_ spatial.territories.0.name }}\r\n                                </span>\r\n                                </li>\r\n                                {{/if}}\r\n\r\n                                {{#if spatial.granularity }}\r\n                                <li>\r\n                                        <span class=\"\" rel=\"tooltip\"\r\n                                        data-placement=\"top\" data-container=\"body\"\r\n                                        title=\"{{_ 'Spatial granularity'}}\">\r\n                                        <span class=\"fa fa-bullseye fa-fw\"></span>\r\n                                        {{_ spatial.granularity }}\r\n                                </span>\r\n                                </li>\r\n                                {{/if}}\r\n\r\n                                <li>\r\n                                        <span class=\"\" rel=\"tooltip\"\r\n                                        data-placement=\"top\" data-container=\"body\"\r\n                                        title=\"{{_ 'Reuses'}}\">\r\n                                        <span class=\"fa fa-retweet fa-fw\"></span>\r\n                                        {{default metrics.reuses 0 }}\r\n                                </span>\r\n                                </li>\r\n\r\n                                <li>\r\n                                        <span class=\"\" rel=\"tooltip\"\r\n                                        data-placement=\"top\" data-container=\"body\"\r\n                                        title=\"{{_ 'Followers'}}\">\r\n                                        <span class=\"fa fa-star fa-fw\"></span>\r\n                                        {{default metrics.followers 0 }}\r\n                                </span>\r\n                                </li>\r\n\r\n                        </ul>\r\n                </li>\r\n                {{/each}}\r\n        </ul>\r\n        <div class=\"text-center\">\r\n                <div class=\"pagination\">\r\n                    {{{ paginate page total page_size }}}\r\n                </div>\r\n        </div>\r\n</script>\r\n```\r\n - **metaclic_template_dataset** (affichage de la fiche)\r\n```\r\n<script id='metaclic_template_dataset' type=\"text/x-handlebars-template\">\r\n        <div class=\"dataset\" data-dataset=\"{{id}}\">\r\n\r\n                <div class='dataset-info'>\r\n                    <blockquote>{{md description }}</blockquote>\r\n                    {{#if extras.remote_url}}\r\n                    <a class=\"site_link\" href=\"{{extras.remote_url}}\" target=_blank>\r\n                        Voir le site original\r\n                </a>\r\n                {{/if}}\r\n                <p class=\"published_on\">\r\n                        {{_ 'published_on' }} {{dt created_at}}\r\n                        {{_ 'and_modified_on'}} {{dt last_modified}}\r\n                        {{_ 'by'}} <a title=\"{{organization.name}}\" href=\"{{organization.page}}\">{{organization.name}}</a>\r\n                </p>\r\n        </div>\r\n\r\n        <div class=\"resources-list\">\r\n                <h3>{{_ 'Resources'}}</h3>\r\n                {{#each resources}}\r\n                <div data-checkurl=\"/api/1/datasets/checkurl/\" itemtype=\"http://schema.org/DataDownload\" itemscope=\"itemscope\" id=\"resource-{{id}}\">\r\n\r\n                        <a href=\"{{url}}\" data-size=\"{{filesize}}\" data-format=\"{{format}}\" data-title=\"{{title}}\" data-id=\"{{id}}\" itemprop=\"url\" target=_blank>\r\n                            <h4>\r\n                                <span data-format=\"{{format}}\">\r\n                                    {{format}}\r\n                                </span>\r\n                                {{title}}\r\n                                <p>Dernière modification le {{dt last_modified}}</p>\r\n                            </h4>\r\n                        </a>\r\n                </div>\r\n        {{/each}}\r\n        </div>\r\n\r\n        <div class=\"meta\">\r\n                <div class=\"producer\">\r\n                        <h3>{{_ 'Producer'}}</h3>\r\n                        <a title=\"{{organization.name}}\" href=\"{{organization.page}}\">\r\n                            <img class=\"organization-logo producer\" alt=\"{{organization.name}}\" src=\"{{fulllogo organization.logo}}\"><br>\r\n                            <span class=\"name\">{{organization.name}}</span>\r\n                        </a>\r\n                </div>\r\n\r\n\r\n                <div class=\"info\">\r\n                        <h3>{{_ 'Informations'}}</h3>\r\n                        <ul>\r\n                                <li title=\"{{_ 'License'}}\" rel=\"tooltip\">\r\n                                        <i class=\"fa fa-copyright\"></i>\r\n                                        <!--a href=\"http://opendatacommons.org/licenses/odbl/summary/\"-->{{_ license}}<!--/a-->\r\n                                </li>\r\n                                <li title=\"{{_ 'Frequency'}}\" rel=\"tooltip\">\r\n                                        <span class=\"fa fa-clock-o\"></span>\r\n                                        {{_ frequency}}\r\n                                </li>\r\n                                <li title=\"{{_ 'Spatial granularity'}}\"  rel=\"tooltip\">\r\n                                        <span class=\"fa fa-bullseye\"></span>\r\n                                        {{_ spatial.granularity}}\r\n                                </li>\r\n                        </ul>\r\n                        <ul class=\"spatial_zones\">\r\n                                {{#each spatial.zones}}\r\n                                <li data-zone=\"{{.}}\">{{.}}</li>\r\n                                {{/each}}\r\n                        </ul>\r\n                        <ul class=\"tags\">\r\n                                {{#each tags}}\r\n                                <li><a title=\"{{.}}\" href=\"https://www.data.gouv.fr/fr/search/?tag={{.}}\">{{.}}</a></li>\r\n                                {{/each}}\r\n                        </ul>\r\n                </div>\r\n\r\n        </div>\r\n</script>\r\n```\r\n##  exemple de personnalisation\r\n\r\nhttp://datakode.github.io/metaclic/exemples/exemple2.html\r\n\r\n\r\n## Integration carte simple\r\n\r\nhttp://datakode.github.io/metaclic/exemples/exemple_map.html\r\n\r\nhttp://datakode.github.io/metaclic/exemples/exemple_map2.html\r\n\r\nhttp://datakode.github.io/metaclic/exemples/exemple_map3.html\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}